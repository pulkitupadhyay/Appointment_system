<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<style>
  h1{
    text-align: center;
  }
  h2{
    margin-top: 1%;
  }
  .mainDiv h2{
    font-size: 1rem !important  ;
  }
  form input{
    font-size: 1rem !important  ;

  }
  .main{
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
</style>
<body>
  <div class="main">

<% function capitalizeFirstLetter(str) { %>
  <% return str.replace(/^\w/, (c) => c.toUpperCase()); %>
<%}%>





<h1 class="my-5" style="font-family: sans-serif; font-weight: bold;" >Book 1 Hour meeting with  <%= capitalizeFirstLetter(employee.name); %> </h1> 




  
  <div class="mainDiv my-4" style="display: flex; padding: 2%; flex-direction: row; justify-content: space-around; width: 100%; flex-wrap: wrap;box-shadow: 0rem 0.5rem 1.5rem 0.5rem rgba(167, 164, 164, 0.7) !important; width: 70%;">

<% if(time_slots.length == 0 ){ %>
<p> sorry!! there is no time slots </p>
<% }else { %>

  <% for(var i=0; i< time_slots.length; i++){  %>
      <div class="my-2" style="border-radius: 1rem; display: flex; flex-direction: column; box-shadow: 0rem 0.5rem 1.5rem 0.5rem rgba(167, 164, 164, 0.7) !important;  padding: 1.5%;">
          

        <% const inputDate = new Date(time_slots[i].from_date);  %>

        
        <% const day = inputDate.getDate().toString().padStart(2, '0');  %>
        <% const month = (inputDate.getMonth() + 1).toString().padStart(2, '0');   %>
        <% const year = inputDate.getFullYear().toString().slice(-2);  %>
          
        
        <% const formattedDate = `${day}/${month}/20${year}`;  %>
          
          <h2> <strong> Date </strong>: <%= formattedDate %> </h2>
        



          <h2> <strong> from </strong>: <%= time_slots[i].time %> </h2>


        <%  const inputTime = time_slots[i].time.toString();     %>
        <% const [hours, minutes] = inputTime.split(":");   %>
          
          
        <%  const hoursNumber = parseInt(hours, 10);   %>
        <%  const minutesNumber = parseInt(minutes, 10);   %>
          
        <%         const newHours = (hoursNumber + 1 ) % 24;    %>
        <%  const newMinutes = minutesNumber;   %>
            
        <%  const formattedTime = `${newHours.toString().padStart(2, '0')}:${newMinutes.toString().padStart(2, '0')}`;   %>
          
        <% var current_time = formattedTime;   %>


          <h2> <strong> TO </strong>: <%= current_time %> </h2>



          <form action="/fake_login" method="post" style="display: flex; flex-direction: column;">

              <input type="text" name = 'slot_id' value=" <%= time_slots[i]._id %> " style="display: none;" >
            
              <input type="text" name="employee_id" value="<%= employee._id %>" style="display: none;">

                

              <button type="submit" class="btn-primary my-2" style="border-radius: 2rem; padding: 2%;"> Book This Slot </button> 


          </form>
         

      </div>
  <% } }%>
  </div>
<!-- 

<div class="my-3" style="display: flex; flex-direction: row; justify-content: center;">


<div class="oneside" style="display: flex; border: 2px solid black;flex-direction: column;padding:1%;">

  <h1> You are booking appointment with  <%= employee.name %> </h1>
  <h1> it is a One hour Meering </h1>

</div>
<div class="secside" style="display: flex; border: 2px solid black; flex-direction: column;padding:1%;">

  <h1>Select Date and Time </h1>
<div style="display: flex; border: 2px solid black; flex-direction: row;padding:1%;">
  <% for(var i=0; i< time_slots.length; i++){  %>
    <div class="mx-2" style="display: flex; flex-direction: row;   padding: 1%; ">
        

       <% const inputDate = new Date(time_slots[i].from_date);  %>

      
       <% const day = inputDate.getDate().toString().padStart(2, '0');  %>
       <% const month = (inputDate.getMonth() + 1).toString().padStart(2, '0');   %>
       <% const year = inputDate.getFullYear().toString().slice(-2);  %>
        
       
       <% const formattedDate = `${day}/${month}/20${year}`;  %>
        
        
       <h1 style="display: flex; border: 2px solid black ; border-radius: 2rem;"> <%=    day  %> </h1>
     
<div class="h1div"> 
  <h1> <%=time_slots[i].time %></h1>
</div>



      <%  const inputTime = time_slots[i].time.toString();     %>
       <% const [hours, minutes] = inputTime.split(":");   %>
        
        
      <%  const hoursNumber = parseInt(hours, 10);   %>
      <%  const minutesNumber = parseInt(minutes, 10);   %>
        
       <%         const newHours = (hoursNumber + 1 ) % 24;    %>
      <%  const newMinutes = minutesNumber;   %>
           
      <%  const formattedTime = `${newHours.toString().padStart(2, '0')}:${newMinutes.toString().padStart(2, '0')}`;   %>
        
       <% var current_time = formattedTime;   %>


     




    </div>
 <% } %>
</div> -->
</div>


</div>



</div>


<script>
    const mainDiv = document.querySelector('.mainDiv');
const childDivs = Array.from(mainDiv.children);

childDivs.sort((a, b) => {
  const dateA = parseDate(a.querySelector('h1').textContent);
  const dateB = parseDate(b.querySelector('h1').textContent);
  return dateA - dateB;
});

childDivs.forEach(div => mainDiv.appendChild(div));

function parseDate(dateString) {
  const [day, month, year] = dateString.split('/').map(Number);
  return new Date(year + 2000, month - 1, day); // Converting to comparable format
}
</script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>